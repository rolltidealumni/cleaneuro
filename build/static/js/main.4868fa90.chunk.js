(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(t,e,a){t.exports=a(398)},264:function(t,e,a){},398:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(20),s=a.n(o),r=a(101),l=(a(264),a(41)),p=a(36),c=a(37),h=a(39),u=a(38),m=a(40),d=a(167),g=a.n(d),v=a(24),b=a.n(v),f=a(168),k=a.n(f),E=a(169),w=a.n(E),y=a(51),x={apiKey:"AIzaSyAmVWAPTXaccP_j52dVJwzEyjHO-XTUoxI",authDomain:"gagunk-app.firebaseapp.com",databaseURL:"https://gagunk-app.firebaseio.com",projectId:"gagunk-app",storageBucket:"gagunk-app.appspot.com",messagingSenderId:"214279252823"},C=a(102),O=a.n(C),j=a(170),L=a(64),S=a(65),A=a(103),D=function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(h.a)(this,Object(u.a)(e).call(this,t))).state={url:"",caption:""},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"componentWillMount",value:function(){var t=Object(j.a)(O.a.mark(function t(){var e,a,n,i;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.data=!1,t.prev=1,t.next=4,fetch("https://cors-anywhere.herokuapp.com/https://api.instagram.com/oembed/?url=".concat(this.props.post.instagramLink));case 4:return e=t.sent,t.next=7,e.json();case 7:this.data=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:this.data&&(a=this.data.title,this.caption=this.data.title,n=/\B@[a-z0-9_-]+/gi,(i=a.match(n))&&i.forEach(function(t){a=a.replace(t,"r\u0336e\u0336d\u0336a\u0336c\u0336t\u0336e\u0336d\u0336")}),this.setState({fulltext:a,thumbnail_width:this.data.thumbnail_width,url:this.data.thumbnail_url,caption:a.substring(0,500)}));case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.caption?i.a.createElement("img",{style:{height:"400px"},src:this.state.url,alt:"Instagram"}):i.a.createElement("span",null);return 612!==this.state.thumbnail_width?i.a.createElement("div",null,i.a.createElement(L.Card,{id:"#"+this.props.post.key,style:{height:"500px",margin:"20px",marginBottom:"75px"},className:this.props.post.leader},i.a.createElement(L.CardText,{style:{height:"428px"}},i.a.createElement(S.GridList,null,i.a.createElement(S.GridTile,{style:{height:"400px"}},e),i.a.createElement(S.GridTile,{style:{height:"440px",marginLeft:"20px"}},i.a.createElement("span",{style:{maxHeight:"300px",minHeight:"300px"}},'"',this.state.caption,' ..."'),i.a.createElement("p",null),i.a.createElement("div",null,i.a.createElement("div",null,"Uh-Oh: ",this.props.post.upvote),i.a.createElement(A.a,{percent:this.props.post.upvote,strokeWidth:"4",trailWidth:"0",strokeColor:"#D8877B"}),i.a.createElement("div",null,"Pass: ",this.props.post.downvote),i.a.createElement(A.a,{percent:this.props.post.downvote,strokeWidth:"4",trailWidth:"0",strokeColor:"#C7CA9A"}))))),i.a.createElement(L.CardActions,{style:{padding:"0px !important",margin:"0 !important"}},i.a.createElement(b.a,{className:"gagunkbtn",id:"gagunk",onClick:function(){return t.props.onUpvote(t.props.post,t.props.post.key)},type:"button",style:{width:"50%",height:"40px",marginRight:"none"},label:"Uh-oh!"}),i.a.createElement(b.a,{className:"gagunkbtn",id:"pass",onClick:function(){return t.props.onDownvote(t.props.post,t.props.post.key)},type:"button",style:{width:"50%",height:"40px",right:"none"},label:"Pass"})))):i.a.createElement("span",null)}}]),e}(n.Component),T=a(171),W=a.n(T),B=function(t){function e(){var t,a;Object(p.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(i)))).handleUpvote=function(t,e){a.props.firebase.ref("posts/"+e).set({instagramLink:t.instagramLink,upvote:t.upvote+1,downvote:t.downvote}),window.location.reload(!0)},a.handleDownvote=function(t,e){a.props.firebase.ref("posts/"+e).set({instagramLink:t.instagramLink,upvote:t.upvote,downvote:t.downvote+1}),window.location.reload(!0)},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this,a=this.props.posts.length-1;a>0&&this.props.posts.forEach(function(t){t.index===a&&(e.props.posts[0].leader="leader")});var n=Object.keys(e.props.posts).map(function(a){return i.a.createElement(D,{key:a,id:a,post:e.props.posts[a],onUpvote:t.handleUpvote,onDownvote:t.handleDownvote})});return i.a.createElement("div",{style:{minWidth:"545px",width:"90%",margin:"auto",marginTop:"100px",maxWidth:"745px"}},this.props.loading?i.a.createElement("div",{id:"loader"},i.a.createElement("center",null,i.a.createElement(W.a,{style:{margin:"200px"},type:"Oval",color:"#C7CA9A",height:60,width:60}))):i.a.createElement("div",null,n))}}]),e}(n.Component),P=function(t){function e(){var t;return Object(p.a)(this,e),(t=Object(h.a)(this,Object(u.a)(e).call(this))).componentWillMount=function(){var e=[],a=y.database().ref("posts").orderByChild("upvote");a.on("value",function(t){var a=0;t.forEach(function(t,n){e.push({index:a,key:t.key,instagramLink:t.val().instagramLink,upvote:t.val().upvote,downvote:t.val().downvote}),a++})}),a.on("value",function(a){t.setState(Object(l.a)({},t.state,{posts:e.reverse(),loading:!1}))})},t.handleOpen=function(){t.setState(Object(l.a)({},t.state,{openDialog:!0}))},t.navigate=function(){window.location="https://github.com/themorganthompson/gagunk"},t.handleClose=function(){t.setState(Object(l.a)({},t.state,{openDialog:!1,instagramLink:""}))},t.handleChange=function(e){t.setState(Object(l.a)({},t.state,{instagramLink:e.target.value}))},t.validate=function(e){return t.state.instagramLink.includes("https://www.instagram.com/p/")},t.handleSubmit=function(e){t.validate(e)?(y.database().ref("posts").push({instagramLink:t.state.instagramLink,upvote:0,downvote:0}),t.setState(Object(l.a)({},t.state,{openDialog:!1,instagramLink:""})),window.location.reload(!0)):t.setState({isValid:!1})},t.state={posts:[],loading:!0,openDialog:!1,isValid:!0,instagramLink:""},y.initializeApp(x),t}return Object(m.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=[i.a.createElement(b.a,{label:"Cancel",primary:!0,class:"cancelBtn",onClick:this.handleClose}),i.a.createElement(b.a,{label:"Submit",primary:!0,class:"submitBtn",onClick:this.handleSubmit})],e=this.state.posts;return i.a.createElement("div",null,i.a.createElement(g.a,{className:"gagunkNav",title:i.a.createElement("span",null,"Ga-Gunk!"),iconElementRight:i.a.createElement("div",null,i.a.createElement(b.a,{className:"gagunkbtn",label:"About",onClick:this.navigate}),i.a.createElement(b.a,{className:"gagunkbtn",label:"Submit Post",onClick:this.handleOpen})),iconStyleLeft:{display:"none"}}),i.a.createElement(k.a,{title:"Submit Post",actions:t,modal:!0,open:this.state.openDialog},i.a.createElement(w.a,{hintText:"Instagram URL",fullWidth:!0,onKeyPress:this.handleChange,onFocus:this.handleChange,onBlur:this.handleChange,value:this.state.instagramLink,onChange:this.handleChange}),i.a.createElement("div",{style:{color:"red"},hidden:this.state.isValid},"Please paste a valid Instagram link.")),i.a.createElement(B,{firebase:y.database(),posts:e,loading:this.state.loading}))}}]),e}(n.Component),U=Object(r.getMuiTheme)({palette:{accent1Color:"deepOrange500"}});s.a.render(i.a.createElement(function(){return i.a.createElement(r.MuiThemeProvider,{muiTheme:U},i.a.createElement(P,null),i.a.createElement("div",{id:"footerArea"},i.a.createElement("center",null,i.a.createElement("div",{id:"footer"},"Made with ",i.a.createElement("span",{role:"img","aria-label":"heart"},"\u2764\ufe0f ")," by ",i.a.createElement("a",{href:"https://www.twitter.com/photobymo/",rel:"noopener noreferrer",target:"_blank"},"Morgan Thompson")))))},null),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.4868fa90.chunk.js.map